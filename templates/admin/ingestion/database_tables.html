{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; Database Tables & Views
</div>
{% endblock %}

{% block content %}
<h1>Database Tables and Views</h1>

{% if error_message %}
<div class="errornote">
    <strong>Error:</strong> {{ error_message }}
</div>
{% endif %}

<div style="margin: 20px 0;">
    <a href="{% url 'admin:index' %}" class="button">‚Üê Back to Admin</a>
</div>

{% if tables %}
<div class="module" style="margin-top: 20px;">
    <h2>Tables ({{ tables|length }})</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f5f5f5;">
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Table Name</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Schema</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for table in tables %}
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <strong>{{ table.table_name }}</strong>
                </td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ table.schema_name }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <a href="{% url 'admin:table_data' table.table_name %}" class="button">View Data</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% if views %}
<div class="module" style="margin-top: 20px;">
    <h2>Views ({{ views|length }})</h2>
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="background-color: #f5f5f5;">
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">View Name</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Schema</th>
                <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for view in views %}
            <tr>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <strong>{{ view.table_name }}</strong>
                </td>
                <td style="padding: 10px; border: 1px solid #ddd;">{{ view.schema_name }}</td>
                <td style="padding: 10px; border: 1px solid #ddd;">
                    <a href="{% url 'admin:table_data' view.table_name %}" class="button">View Data</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endif %}

{% if not tables and not views and not error_message %}
<div class="info">
    <p>No tables or views found in the public schema.</p>
</div>
{% endif %}

{% endblock %}

