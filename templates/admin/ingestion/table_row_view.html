{% extends "admin/base_site.html" %}
{% load i18n static admin_extras %}

{% block title %}{{ title }} | {{ site_title|default:_('Django site admin') }}{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% translate 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:database_tables' %}">Database Tables</a>
&rsaquo; <a href="{% url 'admin:table_data' table_name %}">{{ table_name }}</a>
&rsaquo; View Row
</div>
{% endblock %}

{% block content %}
<h1>View Row: {{ table_name }}</h1>

{% if error_message %}
<div class="errornote">
    <strong>Error:</strong> {{ error_message }}
</div>
{% endif %}

<div style="margin: 20px 0;">
    <a href="{% url 'admin:table_data' table_name %}" class="button">← Back to Table</a>
    <a href="{% url 'admin:database_tables' %}" class="button" style="margin-left: 10px;">← All Tables</a>
</div>

{% if data %}
<div class="module" style="margin-top: 20px;">
    <table style="width: 100%; border-collapse: collapse;">
        <tbody>
            {% for col in columns %}
            <tr>
                <th style="padding: 12px; text-align: left; border: 1px solid #ddd; background-color: #f5f5f5; width: 200px;">
                    {{ col.name }}
                </th>
                <td style="padding: 12px; border: 1px solid #ddd;">
                    {% with col_name=col.name %}
                        {% if data|get_item:col_name %}
                            {{ data|get_item:col_name }}
                        {% else %}
                            <span style="color: #999;">-</span>
                        {% endif %}
                    {% endwith %}
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div style="margin-top: 20px;">
        {% if primary_keys %}
            <a href="{% url 'admin:table_row_edit' table_name %}?{% for pk in primary_keys %}{{ pk }}={{ data|get_item:pk }}{% if not forloop.last %}&{% endif %}{% endfor %}" class="button">Edit</a>
            <a href="{% url 'admin:table_row_delete' table_name %}?{% for pk in primary_keys %}{{ pk }}={{ data|get_item:pk }}{% if not forloop.last %}&{% endif %}{% endfor %}" class="button" style="margin-left: 10px; background-color: #ba2121; color: white;">Delete</a>
        {% endif %}
    </div>
</div>
{% else %}
<div class="info" style="margin-top: 20px;">
    <p>No data found.</p>
</div>
{% endif %}

{% endblock %}

